---
import { Picture } from "astro:assets";
import type { ImageMetadata } from "astro";

type Props = {
  post: {
    id: string;
    data: {
      title: string;
      description: string;
      pubDate: Date;
      updatedDate?: Date;
      heroImage: ImageMetadata;
    };
  };
  formattedTime: string;
};

const { post, formattedTime } = Astro.props;
---

<a href={"/blog/" + post.id} class="group block">
  <article class="flex flex-col gap-4 py-6 md:flex-row md:items-start md:gap-8">
    <div class="shrink-0">
      <Picture
        formats={["webp"]}
        transition:name={`blog-image-${post.id}`}
        src={post.data.heroImage}
        width={256}
        height={256}
        alt={""}
        class="border-foreground/10 size-20 rounded-lg border object-cover md:size-30"
      />
    </div>

    <div
      class="flex flex-col gap-1.5"
      transition:name={`blog-header-${post.id}`}
    >
      <h2
        class="text-lg font-semibold text-pretty group-hover:text-accent transition-colors"
      >
        {post.data.title}
      </h2>
      <p class="text-foreground-secondary text-sm">
        <time datetime={formattedTime}>{formattedTime}</time>
      </p>
      <p
        class="text-foreground-secondary max-w-[55ch] text-sm leading-relaxed line-clamp-2 text-pretty"
      >
        {post.data.description}
      </p>
    </div>

    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="text-foreground-secondary hidden shrink-0 transition-transform group-hover:translate-x-1 md:ml-auto md:block"
    >
      <path d="m9 18 6-6-6-6"></path>
    </svg>
  </article>
</a>
<div class="border-border border-b"></div>
