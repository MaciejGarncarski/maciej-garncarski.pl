---
import { Picture } from "astro:assets";

import Layout from "@layouts/layout.astro";
import Seo from "@/components/seo.astro";
import { projects } from "@/data/projects";

const seoData = {
  title: "Projekty",
  description:
    "Przeglądaj moje najciekawsze projekty programistyczne, które pokazują moje umiejętności i pasję do tworzenia innowacyjnych rozwiązań.",
  keywords: ["projekty", "portfolio", "development", "software", "programming"],
};
---

<Layout>
  <Seo
    slot="head"
    description={seoData.description}
    title={seoData.title}
    keywords={seoData.keywords}
  />
  <div class="mx-auto flex w-full max-w-[50rem] flex-col gap-8">
    <header class="flex flex-col gap-3">
      <p class="text-accent text-sm font-semibold uppercase tracking-widest">
        Portfolio
      </p>
      <h1 class="text-4xl font-bold tracking-tight md:text-5xl">Projekty</h1>
      <p
        class="text-foreground-body max-w-[65ch] text-lg leading-relaxed text-pretty"
      >
        Najciekawsze projekty, które pokazują moje umiejętności i pasję do
        tworzenia innowacyjnych rozwiązań.
      </p>
    </header>

    <ul class="grid gap-6">
      {
        projects.map((project) => {
          return (
            <li>
              <a href={`/projekty/${project.id}`} class="group block">
                <article class="flex flex-col gap-5 py-6 md:flex-row md:items-center md:gap-8">
                  {project.thumbnail ? (
                    <Picture
                      formats={["webp"]}
                      src={project.thumbnail}
                      alt={project.title}
                      transition:name={`project-image-${project.id}`}
                      pictureAttributes={{
                        class: "shrink-0",
                      }}
                      class="border-foreground/10 w-full shrink-0 rounded-md border object-contain md:w-56 lg:w-64"
                    />
                  ) : (
                    <div class="border-foreground/10 bg-background-secondary flex h-32 w-full shrink-0 items-center justify-center rounded-lg border md:w-56 lg:w-64">
                      <p class="text-foreground-secondary text-sm">
                        Brak podglądu
                      </p>
                    </div>
                  )}
                  <div class="flex flex-col gap-2">
                    <h2
                      class="text-xl font-semibold text-pretty group-hover:text-accent transition-colors"
                      transition:name={`project-title-${project.id}`}
                    >
                      {project.title}
                    </h2>
                    <p class="text-foreground-secondary text-sm leading-relaxed line-clamp-2">
                      {project.description}
                    </p>
                    <div class="flex flex-wrap gap-1.5 pt-1" role="list">
                      {project.tags.slice(0, 4).map((tag) => (
                        <span
                          role="listitem"
                          class="bg-accent/20 text-foreground-secondary rounded-full px-2.5 py-0.5 text-xs font-medium"
                        >
                          {tag}
                        </span>
                      ))}
                      {project.tags.length > 4 && (
                        <span class="text-foreground-secondary rounded-full px-2.5 py-0.5 text-xs font-medium">
                          +{project.tags.length - 4}
                        </span>
                      )}
                    </div>
                  </div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-foreground-secondary hidden shrink-0 transition-transform group-hover:translate-x-1 md:ml-auto md:block"
                  >
                    <path d="m9 18 6-6-6-6" />
                  </svg>
                </article>
              </a>
              <div class="border-border border-b" />
            </li>
          );
        })
      }
    </ul>
  </div>
</Layout>
